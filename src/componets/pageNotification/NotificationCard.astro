---
import DivButton from "../../componets/DivButton.astro"



const { notification, path } = Astro.props;

// Fallbacks
const title = notification.title || "Untitled Announcement";
const excerpt = notification.opening || "No details available."; 
const image = notification.image_url || "https://images.pexels.com/photos/27063861/pexels-photo-27063861.jpeg?w=1600&h=900&fit=crop";
const date = notification.date_onsite
? new Date(notification.date_onsite).toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })
: "Date not specified";
const category = notification.category || "General";
const link = `/${path}/${notification.search_id}`;
const featured = notification.featured;
---

<article
        data-category={category.toLowerCase()}
        data-date={notification.date_onsite || ''}
        class="group bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 transition-all duration-500 hover:shadow-2xl hover:-translate-y-3 cursor-pointer"
        >
        <!-- Image -->
    <DivButton href={link}>
        <div class="relative overflow-hidden">
            <img
                    src={image}
                    alt={title}
                    class="w-full h-64 object-cover transition-transform duration-700 group-hover:scale-110"
                    loading="lazy"
                    />

                    {featured && (
                    <div class="absolute top-4 left-4 bg-white px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider shadow-lg">
                        Featured
                    </div>
                    )}

                    <div class="absolute bottom-4 left-4 bg-black/70 backdrop-blur-md text-white px-5 py-2 rounded-full text-xs font-semibold tracking-wider uppercase border border-white/20">
                        {category}
                    </div>
        </div>


        <!-- Content -->
        <div class="p-8 space-y-5">
            <!-- Date -->
            <time class="text-sm font-medium text-gray-500 tracking-wider uppercase flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                {date}
            </time>

            <!-- Title -->
            <h3 class="text-2xl md:text-3xl font-black text-gray-900 leading-tight line-clamp-2 group-hover:text-black transition">
            </h3>

            <!-- Excerpt -->
            <p class="text-gray-600 leading-relaxed line-clamp-3 text-base">
            {excerpt}
            </p>

        </div>

    </DivButton>
</article>

