---
import Button from "../../components/Button.astro";
import ClosingNote from "../../components/ClosingNote.astro";

const {title, images, link}= {
  title: "Campus Life",
  images: [
    { src: "https://images.pexels.com/photos/1275393/pexels-photo-1275393.jpeg", alt: "Main Masjid", caption: "Peaceful morning at the Masjid" },
    { src: "https://images.pexels.com/photos/207691/pexels-photo-207691.jpeg", alt: "Classroom", caption: "Reflective learning in class" },
    { src: "https://images.pexels.com/photos/256490/pexels-photo-256490.jpeg", alt: "Students", caption: "Moments of quiet study" },
    { src: "https://images.pexels.com/photos/256541/pexels-photo-256541.jpeg", alt: "Students", caption: "Engaged learning" },
    { src: "https://images.pexels.com/photos/207692/pexels-photo-207692.jpeg", alt: "Students", caption: "Peaceful campus walk" },
    { src: "https://images.pexels.com/photos/207693/pexels-photo-207693.jpeg", alt: "Students", caption: "Evening reflection time" }
  ],
  link: { href: "/events/1", text: "View Full Gallery" }
};
---

<section class="py-16 bg-gray-50">
  <div class="container mx-auto px-4 sm:px-6 max-w-6xl">

    {/* Title */}
    <h2 class="text-4xl sm:text-5xl font-black text-center mb-12 text-gray-900">
      {title}
    </h2>

    {/* Buttons + Scrollable Gallery Wrapper */}
    <div class="relative">
      
      {/* Prev button */}
      <button
        id="prev-btn"
        class="absolute left-0 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur border border-gray-200 shadow-lg rounded-full w-12 h-12 flex items-center justify-center z-10 hover:scale-105 transition"
        aria-label="Previous"
      >
        ‹
      </button>

      {/* Scrollable gallery */}
      <div
        id="gallery-scroll"
        class="flex gap-8 overflow-x-auto pb-6 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 scroll-smooth"
      >
        {images.map((image) => (
          <div class="shrink-0 w-full sm:w-80 md:w-96 snap-center">
            <div class="rounded-2xl overflow-hidden shadow-xl border border-gray-200">
              <img
                src={image.src}
                alt={image.alt}
                loading="lazy"
                class="w-full h-64 sm:h-80 md:h-96 lg:h-140 object-cover"
              />
            </div>
            {image.caption && (
              <p class="mt-4 text-center text-gray-800 text-base sm:text-lg max-w-3xl mx-auto overline">
                {image.caption}
              </p>
            )}
          </div>
        ))}
      </div>

      {/* Next button */}
      <button
        id="next-btn"
        class="absolute right-0 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur border border-gray-200 shadow-lg rounded-full w-12 h-12 flex items-center justify-center z-10 hover:scale-105 transition"
        aria-label="Next"
      >
        ›
      </button>
    </div>

    {/* View Gallery Button */}
    {link && (
      <div class="text-center mt-12">
        <Button
          href={link.href}
          text={link.text}
          type="outlined"
          class="text-gray-700 border-gray-300 hover:bg-gray-100 focus:ring-gray-300"
        />
      </div>
    )}

    <div class="mt-16">
      <ClosingNote />
    </div>

  </div>

  {/* Scroll buttons JS */}
  <script type="module" is:inline>
    const scrollContainer = document.getElementById('gallery-scroll');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // Scroll width = one child width
    const childWidth = scrollContainer.children[0].offsetWidth + 32; // 32 = gap-8

    prevBtn.addEventListener('click', () => {
      scrollContainer.scrollBy({ left: -childWidth, behavior: 'smooth' });
    });

    nextBtn.addEventListener('click', () => {
      scrollContainer.scrollBy({ left: childWidth, behavior: 'smooth' });
    });
  </script>
</section>

