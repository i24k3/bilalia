
---

import { supabase } from "../../lib/supabase.js";
import NotificationTable from "../../components/NotificationTable.astro";
import Button from "../../components/Button.astro";
import ClosingNote from '../../components/ClosingNote.astro';

const today = new Date().toISOString().split("T")[0];

const { data: notifications, error } = await supabase
  .from("notifications")
  .select("search_id, title, date_onsite, url_slug")
  .eq("category", "admission")
  .order("date_onsite", { ascending: true })
  .order("search_id", { ascending: false });
if (error) console.error(error);

const data = {
sectionTitle : "Important Dates",
};
---

<section class="bg-white rounded-3xl border border-gray-200 p-8 sm:p-12 max-w-4xl mx-auto mt-32 mb-32">
  <div class="mb-10">
    <h2 class="text-3xl sm:text-4xl font-black text-black border-l-8 border-emerald-600 pl-4 sm:pl-6">
        { data.sectionTitle }
    </h2>
    <p class="mt-4 text-gray-600 text-base sm:text-lg max-w-2xl">
      Keep track of key admission deadlines to ensure a smooth process.
    </p>
  </div>

  <NotificationTable notifications={notifications} />

    <div class="text-center mt-16">
        <Button href="/notifications/1" text="Read Other Notifications" type="outlined" />
    </div>



<ClosingNote/>
</section>

